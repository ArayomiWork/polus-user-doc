Настройка справочника
=====================

В разделе «Справочник» можно добавить необходимые категории и типовые замечания для присвоения их к замечаниям (Рис. 1).

..  thumbnail:: images/ref-books-setup-1-ref-books-menu.gif
    :alt: Настройка справочника категорий
    :align: center
    :title: Рис. 1. Настройка справочника категорий
    :show_caption: True

Настройка справочника категорий
-------------------------------

Для создания новой категории перейдите в меню «Категории» (Рис. 2), нажмите на кнопку «Добавить категорию»,
введите название, например, «Инженерные сети» и нажмите на кнопку «Ок».

..  thumbnail:: images/ref-books-setup-2-category-creating.gif
    :alt: Создание новой категории
    :align: center
    :title: Рис. 2. Создание новой категории 
    :show_caption: True

Также категории можно объединять по папкам.

Для создания папки нажмите на кнопку «Добавить каталог» (Рис. 3), введите название папки и нажмите на «Ок», после чего папка появится в списке.

..  thumbnail:: images/ref-books-setup-3-catalogue-creating.png
    :alt: Создание каталога категорий
    :align: center
    :title: Рис. 3. Создание каталога категорий 
    :show_caption: True

Название категории и папок можно отредактировать, для этого нажмите «Редактировать»,
далее — кнопку и в открывшемся окне введите исправленное название категории (Рис. 4). 

..  thumbnail:: images/ref-books-setup-4-editing.png
    :alt: Редактирование категории/папки
    :align: center
    :title: Рис. 4. Редактирование категории/папки
    :show_caption: True

Чтобы удалить категорию или папку, нажмите на кнопку «Редактировать» и удалите, нажав на красный крест.

..  warning:: Если в удаляемой папке есть категории, то они тоже удалятся безвозвратно. Будьте осторожны.

Добавление типовых замечаний
----------------------------

..  thumbnail:: images/ref-books-setup-5-typical-tasks.png
    :alt: Раздел "Типовые замечания"
    :align: center
    :title: Рис. 5. Раздел "Типовые замечания"
    :show_caption: True

В этом разделе вы можете сами создать нормативно-техническую документацию и типовые формулировки для замечаний в приложении «СтройКонтроль».

Существует 2 способа создания нормативно-технической документации:

*   вручную,
*   импорт подготовленного файла.

Создание типовых замечаний вручную
++++++++++++++++++++++++++++++++++

Чтобы создать НТД, необходимо создать пустую папку с названием документации и внутри этой папки добавить необходимые пункты НТД.

Чтобы создать папку, нажмите на кнопку «Добавить папку» и введите название папки (Рис. 6).

..  thumbnail:: images/ref-books-setup-6-typical-tasks-folder-creation.png
    :alt: Создание папки
    :align: center
    :title: Рис. 6. Создание папки
    :show_caption: True

Папки могут содержать в себе другие каталоги, а также нормативные документы: ГОСТы, СНиПы, СП и так далее.

Зайдите в созданную папку и нажмите «Добавить типовое замечание» (Рис. 7).

..  thumbnail:: images/ref-books-setup-7-typical-tasks-adding.png
    :alt: Добавление типовых замечаний
    :align: center
    :title: Рис. 7. Добавление типовых замечаний
    :show_caption: True

В появившемся окне заполните информацию:

*   наименование или номер типового замечания,
*   описание.

Когда все данные будут заполнены, нажмите на кнопку «Добавить» (Рис. 8).

..  thumbnail:: images/ref-books-setup-8-typical-tasks-creating.png
    :alt: Создание типовых замечаний
    :width: 70%
    :title: Рис. 8. Создание типовых замечаний
    :show_caption: True

Подобным образом заносим все пункты нормативного документа (Рис. 9).

..  thumbnail:: images/ref-books-setup-9-typical-tasks-list.png
    :alt: Список типовых замечаний
    :align: center
    :title: Рис. 9. Список типовых замечаний
    :show_caption: True

Импорт подготовленного файла НТД
++++++++++++++++++++++++++++++++

Файл должен быть с расширением ``.txt`` и составлен следующим образом:

..  code-block:: text

    Название{Enter}
    Стандарт{Enter}
    {Enter}
    Номер/Наименование_пункта{пробел}Описание пункта{Enter}
    Продолжение описания{Enter}
    {Enter}
    {Enter}
    Номер/Наименование_следующего_пункта{пробел}Описание следующего пункта{Enter}

Вот так этот текст должен выглядеть в текстовом редакторе (Рис. 10):

..  thumbnail:: images/ref-books-setup-13-typical-tasks-import-file-example.png
    :alt: Импорт подготовленный файл в текстовом редакторе
    :width: 70%
    :title: Рис. 10. Импорт подготовленный файл в текстовом редакторе
    :show_caption: True

Загрузите подготовленный файл, нажав кнопку «Импортировать документ» (Рис. 11). В открывшемся окне выбираем файл, который мы создали.

..  thumbnail:: images/ref-books-setup-14-typical-tasks-import.png
    :alt: Импорт подготовленного файла НТД
    :align: center
    :title: Рис. 11. Импорт подготовленного файла НТД
    :show_caption: True

Импортированный файл НТД в приложении выглядит следующим образом:

..  list-table::
        :widths: 50 50

        *   -   ..  thumbnail:: images/ref-books-setup-15-typical-tasks-imported-file-example.png
                    :alt: Импортированный документ в приложении
                    :align: center
                    :group: Импортированный документ
                    :title: Рис. 12. Импортированный документ в приложении
            -   ..  thumbnail:: images/ref-books-setup-16-typical-tasks-imported-file-example.png
                    :alt: Импортированный документ в приложении
                    :align: center
                    :group: Импортированный документ
                    :title: Рис. 13. Импортированный документ в приложении

Режим редактирования
++++++++++++++++++++

Вы можете переименовывать и удалять папки и документацию с помощью режима редактирования. 
Для этого нажмите на кнопку "Редактировать" (Рис. 14).

..  thumbnail:: images/ref-books-setup-10-typical-tasks-editing.gif
    :alt: Режим редактирования
    :align: center
    :title: Рис. 14. Режим редактирования
    :show_caption: True

Режим редактирования позволяет открыть меню редактирования каталогов (Рис. 15), в котором можно:

*   переименовать папку,
*   присвоить документации стандарт,
*   создать маску заголовка НТД,
*   создать маску содержимого НТД.

..  thumbnail:: images/ref-books-setup-11-typical-tasks-folder-editing.png
    :alt: Меню редактирования каталогов
    :width: 70%
    :title: Рис. 15. Меню редактирования каталогов
    :show_caption: True

..  note:: Маски заголовка и содержимого НТД --- это данные, которые будут автоматически заполняться в полях "Названия замечания"
    и "Описание замечания" соответственно.

В масках можно использовать заголовки, наименования и стандарты, которые вы заполняете до этого.
Формулы для масок:

#.  ``{заголовок типового замечания}`` --- под эту формулу подставится наименование/номер типового замечания (Рис. 8).
#.  ``{описание типового замечания}`` --- под эту формулу подставится описание типового замечания (Рис. 8).
#.  ``{наименование стандарта}`` --- под эту формулу подставится стандарт присвоенный папке с замечаниями (Рис.15).
#.  ``{название документа}`` --- под эту формулу подставится название папки с замечаниями (Рис.15).

Пример заполнения типового документа: 

:Маска заголовка НТД: Нарушен пункт ``{заголовок типового замечания}`` нормативного документа ``{наименование стандарта}`` ``{название документа}``.

----

:Маска содержимого НТД: ``{описание типового замечания}``

В конечном виде поля замечания «Название» и «Описание» сформируются так (Рис. 16):

..  thumbnail:: images/ref-books-setup-12-typical-tasks-autofill-result.png
    :alt: Заполнение полей «Название» и «Описание» из НТД
    :align: center
    :title: Рис. 16. Заполнение полей «Название» и «Описание» из НТД
    :show_caption: True
